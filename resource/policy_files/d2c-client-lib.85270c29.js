var AWSD2CClient=function(e){"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class n{static get(){return this.config=Object.assign({},this.configFromJson,window.AWSMA.config||{}),this.config}}t(n,"configFromJson",void 0),t(n,"config",void 0),(()=>{window.AWSMA=window.AWSMA||{};const e=document.getElementById("awsma-config");n.configFromJson=function(e){let t={};if(null===e||!e.textContent)return t;try{t=JSON.parse(e.textContent)}catch(e){console.error(e)}return t}(e)})();const o={regStatus:{cat:"performance"},"aws-reg-aid":{cat:"functional"},"awsd2c-token":{cat:"functional"},"awsd2c-token-c":{cat:"functional"},"aws-target-visitor-id":{cat:"functional"},_mkto_trk:{cat:"functional"}},r={essential:!0,performance:!0,functional:!1,advertising:!1};var i={exports:{}};
/*! For license information please see shortbread-cookie-reader.js.LICENSE.txt */function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}window,i.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=50)}({13:function(e,t,n){n.r(t),n.d(t,"v1",(function(){return f})),n.d(t,"v3",(function(){return C})),n.d(t,"v4",(function(){return A})),n.d(t,"v5",(function(){return O}));var o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),r=new Uint8Array(16);function i(){if(!o)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(r)}for(var a=[],s=0;s<256;++s)a.push((s+256).toString(16).substr(1));var c,u,l=function(e,t){var n=t||0,o=a;return(o[e[n+0]]+o[e[n+1]]+o[e[n+2]]+o[e[n+3]]+"-"+o[e[n+4]]+o[e[n+5]]+"-"+o[e[n+6]]+o[e[n+7]]+"-"+o[e[n+8]]+o[e[n+9]]+"-"+o[e[n+10]]+o[e[n+11]]+o[e[n+12]]+o[e[n+13]]+o[e[n+14]]+o[e[n+15]]).toLowerCase()},d=0,p=0,f=function(e,t,n){var o=t&&n||0,r=t||[],a=(e=e||{}).node||c,s=void 0!==e.clockseq?e.clockseq:u;if(null==a||null==s){var f=e.random||(e.rng||i)();null==a&&(a=c=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==s&&(s=u=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:p+1,g=h-d+(m-p)/1e4;if(g<0&&void 0===e.clockseq&&(s=s+1&16383),(g<0||h>d)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=h,p=m,u=s;var y=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;r[o++]=y>>>24&255,r[o++]=y>>>16&255,r[o++]=y>>>8&255,r[o++]=255&y;var v=h/4294967296*1e4&268435455;r[o++]=v>>>8&255,r[o++]=255&v,r[o++]=v>>>24&15|16,r[o++]=v>>>16&255,r[o++]=s>>>8|128,r[o++]=255&s;for(var b=0;b<6;++b)r[o+b]=a[b];return t||l(r)},h=function(e,t,n){function o(e,o,r,i){var a=r&&i||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof o&&(o=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(o)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(o)||16!==o.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var s=n(o.concat(e));if(s[6]=15&s[6]|t,s[8]=63&s[8]|128,r)for(var c=0;c<16;++c)r[a+c]=s[c];return r||l(s)}try{o.name=e}catch(e){}return o.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",o};function m(e){return 14+(e+64>>>9<<4)+1}function g(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function y(e,t,n,o,r,i){return g((a=g(g(t,e),g(o,i)))<<(s=r)|a>>>32-s,n);var a,s}function v(e,t,n,o,r,i,a){return y(t&n|~t&o,e,t,r,i,a)}function b(e,t,n,o,r,i,a){return y(t&o|n&~o,e,t,r,i,a)}function w(e,t,n,o,r,i,a){return y(t^n^o,e,t,r,i,a)}function k(e,t,n,o,r,i,a){return y(n^(t|~o),e,t,r,i,a)}var C=h("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,o="0123456789abcdef",r=0;r<n;r+=8){var i=e[r>>5]>>>r%32&255,a=parseInt(o.charAt(i>>>4&15)+o.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[m(t)-1]=t;for(var n=1732584193,o=-271733879,r=-1732584194,i=271733878,a=0;a<e.length;a+=16){var s=n,c=o,u=r,l=i;n=v(n,o,r,i,e[a],7,-680876936),i=v(i,n,o,r,e[a+1],12,-389564586),r=v(r,i,n,o,e[a+2],17,606105819),o=v(o,r,i,n,e[a+3],22,-1044525330),n=v(n,o,r,i,e[a+4],7,-176418897),i=v(i,n,o,r,e[a+5],12,1200080426),r=v(r,i,n,o,e[a+6],17,-1473231341),o=v(o,r,i,n,e[a+7],22,-45705983),n=v(n,o,r,i,e[a+8],7,1770035416),i=v(i,n,o,r,e[a+9],12,-1958414417),r=v(r,i,n,o,e[a+10],17,-42063),o=v(o,r,i,n,e[a+11],22,-1990404162),n=v(n,o,r,i,e[a+12],7,1804603682),i=v(i,n,o,r,e[a+13],12,-40341101),r=v(r,i,n,o,e[a+14],17,-1502002290),n=b(n,o=v(o,r,i,n,e[a+15],22,1236535329),r,i,e[a+1],5,-165796510),i=b(i,n,o,r,e[a+6],9,-1069501632),r=b(r,i,n,o,e[a+11],14,643717713),o=b(o,r,i,n,e[a],20,-373897302),n=b(n,o,r,i,e[a+5],5,-701558691),i=b(i,n,o,r,e[a+10],9,38016083),r=b(r,i,n,o,e[a+15],14,-660478335),o=b(o,r,i,n,e[a+4],20,-405537848),n=b(n,o,r,i,e[a+9],5,568446438),i=b(i,n,o,r,e[a+14],9,-1019803690),r=b(r,i,n,o,e[a+3],14,-187363961),o=b(o,r,i,n,e[a+8],20,1163531501),n=b(n,o,r,i,e[a+13],5,-1444681467),i=b(i,n,o,r,e[a+2],9,-51403784),r=b(r,i,n,o,e[a+7],14,1735328473),n=w(n,o=b(o,r,i,n,e[a+12],20,-1926607734),r,i,e[a+5],4,-378558),i=w(i,n,o,r,e[a+8],11,-2022574463),r=w(r,i,n,o,e[a+11],16,1839030562),o=w(o,r,i,n,e[a+14],23,-35309556),n=w(n,o,r,i,e[a+1],4,-1530992060),i=w(i,n,o,r,e[a+4],11,1272893353),r=w(r,i,n,o,e[a+7],16,-155497632),o=w(o,r,i,n,e[a+10],23,-1094730640),n=w(n,o,r,i,e[a+13],4,681279174),i=w(i,n,o,r,e[a],11,-358537222),r=w(r,i,n,o,e[a+3],16,-722521979),o=w(o,r,i,n,e[a+6],23,76029189),n=w(n,o,r,i,e[a+9],4,-640364487),i=w(i,n,o,r,e[a+12],11,-421815835),r=w(r,i,n,o,e[a+15],16,530742520),n=k(n,o=w(o,r,i,n,e[a+2],23,-995338651),r,i,e[a],6,-198630844),i=k(i,n,o,r,e[a+7],10,1126891415),r=k(r,i,n,o,e[a+14],15,-1416354905),o=k(o,r,i,n,e[a+5],21,-57434055),n=k(n,o,r,i,e[a+12],6,1700485571),i=k(i,n,o,r,e[a+3],10,-1894986606),r=k(r,i,n,o,e[a+10],15,-1051523),o=k(o,r,i,n,e[a+1],21,-2054922799),n=k(n,o,r,i,e[a+8],6,1873313359),i=k(i,n,o,r,e[a+15],10,-30611744),r=k(r,i,n,o,e[a+6],15,-1560198380),o=k(o,r,i,n,e[a+13],21,1309151649),n=k(n,o,r,i,e[a+4],6,-145523070),i=k(i,n,o,r,e[a+11],10,-1120210379),r=k(r,i,n,o,e[a+2],15,718787259),o=k(o,r,i,n,e[a+9],21,-343485551),n=g(n,s),o=g(o,c),r=g(r,u),i=g(i,l)}return[n,o,r,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(m(t)),o=0;o<t;o+=8)n[o>>5]|=(255&e[o/8])<<o%32;return n}(e),8*e.length))})),A=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){for(var r=n||0,a=0;a<16;++a)t[r+a]=o[a];return t}return l(o)};function T(e,t,n,o){switch(e){case 0:return t&n^~t&o;case 1:case 3:return t^n^o;case 2:return t&n^t&o^n&o}}function E(e,t){return e<<t|e>>>32-t}var O=h("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var o=unescape(encodeURIComponent(e));e=[];for(var r=0;r<o.length;++r)e.push(o.charCodeAt(r))}e.push(128);for(var i=e.length/4+2,a=Math.ceil(i/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<a;++d){for(var p=new Uint32Array(80),f=0;f<16;++f)p[f]=s[d][f];for(var h=16;h<80;++h)p[h]=E(p[h-3]^p[h-8]^p[h-14]^p[h-16],1);for(var m=n[0],g=n[1],y=n[2],v=n[3],b=n[4],w=0;w<80;++w){var k=Math.floor(w/20),C=E(m,5)+T(k,g,y,v)+b+t[k]+p[w]>>>0;b=v,v=y,y=E(g,30)>>>0,g=m,m=C}n[0]=n[0]+m>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}))},4:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CONSENT_COOKIE_CHANGED_EVENT=t.DEFAULT_TANGERINEBOX_DEV_DOMAIN=t.DEFAULT_DOMAIN=t.DEFAULT_LANGUAGE=t.ALL_ALLOWED=t.DEFAULT_COOKIE=t.DEFAULT_COOKIE_AGE=t.COOKIE_VERSION=void 0,t.COOKIE_VERSION="1",t.DEFAULT_COOKIE_AGE=31536e3,t.DEFAULT_COOKIE={essential:!0,functional:!1,performance:!1,advertising:!1},t.ALL_ALLOWED={essential:!0,functional:!0,performance:!0,advertising:!0},t.DEFAULT_LANGUAGE="en-us",t.DEFAULT_DOMAIN=".aws.amazon.com",t.DEFAULT_TANGERINEBOX_DEV_DOMAIN=".aws-dev.amazon.com",t.CONSENT_COOKIE_CHANGED_EVENT="cookie-consent-changed"},5:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.setConsentCookie=t.getId=t.getConsentCookie=t.validateConfiguration=void 0;var r=n(7),i=n(4);function a(e,t){var n=e.domain,o=void 0===n?i.DEFAULT_DOMAIN:n,r=e.log,a=function(e){return"."===e.charAt(0)&&(e=e.slice(1)),e}(o),s=window.location.hostname;return!!s.endsWith(a)||((r?r("error"):function(){})("domainMismatch",{detail:"Domain mismatch",source:t,configuredDomain:o,actualDomain:s}),console.error("Shortbread failed to set user's cookie preference because the domain name that was passed in does not match the hostname of the application. \n        Configured domain: "+o+".\n        Actual domain: "+s+".\n        As a fallback, Shortbread is only allowing 'essential' cookies to be used."),!1)}function s(e,t){var n,o,r=e.match("(^|;)\\s*awsccc\\s*=\\s*([^;]+)"),i=t?t("error"):function(){};if(r&&r.length>0)try{var a=JSON.parse(atob(r[r.length-1]));return 1===(o=a).e&&"number"==typeof o.p&&"number"==typeof o.f&&"number"==typeof o.a&&"string"==typeof o.i&&"string"==typeof o.v?{essential:1===(n=a).e,performance:1===n.p,functional:1===n.f,advertising:1===n.a,id:n.i,version:n.v}:void i("getCookie",{detail:"Cookie format is not valid",cookie:a})}catch(e){return void i("getCookie",{detail:"Error parsing cookie",cookie:r[r.length-1]})}}function c(e){void 0===e&&(e=function(){return document.cookie});var t=s(e());if(t&&t.id)return t.id}function u(e){document.cookie=e}t.validateConfiguration=a,t.getConsentCookie=function(e,t){void 0===e&&(e=function(){return document.cookie});var n=s(e(),t);if(n)return{essential:n.essential,performance:n.performance,functional:n.functional,advertising:n.advertising}},t.getId=c,t.setConsentCookie=function(e,t,n,s,l,d,p,f,h){void 0===t&&(t=i.DEFAULT_DOMAIN),void 0===n&&(n=i.DEFAULT_COOKIE_AGE),void 0===s&&(s=r.default),void 0===l&&(l=u),void 0===d&&(d=a),d({domain:t,log:p},"customize");var m,g=c()||s(p,f,h),y=o(o({},e),{id:g,version:i.COOKIE_VERSION}),v={e:(m=y).essential?1:0,p:m.performance?1:0,f:m.functional?1:0,a:m.advertising?1:0,i:m.id,v:m.version};return l("awsccc="+btoa(JSON.stringify(v))+"; domain="+t+"; path=/; max-age="+n+"; secure=true; SameSite=Lax"),y}},50:function(e,t,n){e.exports=n(51)},51:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AWSCShortbreadCookieReader=void 0;var r=n(5),i=n(4),a=n(8);t.AWSCShortbreadCookieReader=function(e){void 0===e&&(e={});var t,n,s=e,c=s.log||a.createLogger({baseUrl:s.hasConsoleNavFooter?a.DEFAULT_CONSOLE_INTEGRATION_LOGGER_PIXEL_URL:a.DEFAULT_LOGGER_PIXEL_URL}),u=(t=s.onConsentChanged,n=function(e){var n=e.detail;"function"==typeof t&&t(n)},document.addEventListener(i.CONSENT_COOKIE_CHANGED_EVENT,n),n);return{getConsentCookie:function(){return r.getConsentCookie(s.__storeReader,c)},hasConsent:function(e){return(r.getConsentCookie(s.__storeReader,c)||o({},i.DEFAULT_COOKIE))[e]},__close:function(){document.removeEventListener(i.CONSENT_COOKIE_CHANGED_EVENT,u)}}},t.default=t.AWSCShortbreadCookieReader},7:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(13);t.default=function(e,t,n){void 0===t&&(t=o.v4),void 0===n&&(n=function(){return"ts-"+Date.now().toString()});var r=e?e("error"):function(){};try{return t()}catch(e){return r("uuid",{detail:"Error generating UUID",errorMessage:e.message||""}),n()}}},8:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_LOGGER=t.createLogger=t.DEFAULT_CONSOLE_INTEGRATION_LOGGER_PIXEL_URL=t.DEFAULT_LOGGER_PIXEL_URL=void 0,t.DEFAULT_LOGGER_PIXEL_URL="https://prod.log.shortbread.aws.dev/1x1.png",t.DEFAULT_CONSOLE_INTEGRATION_LOGGER_PIXEL_URL="https://prod.log.shortbread.analytics.console.aws.a2z.com/1x1.png",t.createLogger=function(e){var n=e.baseUrl,r=void 0===n?t.DEFAULT_LOGGER_PIXEL_URL:n,i=e.timeout,a=void 0===i?5e3:i;return function(e){return function(t,n){void 0===n&&(n={});var i=function(e,t,n,r){void 0===r&&(r={});var i=o({timestamp:Date.now(),logVersion:"1",domain:window.location.host,url:window.location.href},r);return e+"?severity="+encodeURIComponent(t)+"&message="+encodeURIComponent(n)+"&payload="+encodeURIComponent(JSON.stringify(i))}(r,e,t,n);!function(e,t){try{var n=new XMLHttpRequest;n.onreadystatechange=function(){},n.ontimeout=function(){},n.onerror=function(){},n.open("HEAD",e),n.timeout=t,n.send()}catch(e){console.log("Error attempting to post a log message: {e}")}}(i,a)}}},t.DEFAULT_LOGGER=t.createLogger({baseUrl:"https://prod.log.shortbread.aws.dev/1x1.png"}),t.default=t.createLogger}});var d,p={expires:31536e3,path:"/",secure:!0,domain:window.location.hostname,samesite:"Lax"},f=/^(?:expires|max-age|path|domain|secure)$/i,h="Name cannot contain reserved cookie property names";function m(e,t,n){if(!e)throw new Error("No params were passed");var o=Object.assign({},p,n);return t||""===t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(f.test(e))throw new Error(h);var o="";if(n.expires){var r=new Date;r.setTime(r.getTime()+1e3*n.expires),o=";expires="+r.toUTCString()}document.cookie="".concat(e,"=").concat(t).concat(o,";domain=").concat(n.domain,";path=").concat(n.path,";samesite:").concat(n.samesite,";").concat(n.secure?";secure":"")}(e,t,o):function(e){var t=/[.*+?^${}()|[\]\\]/g;return document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+e.replace(t,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")||null}(e)}!function(e){e.ALPHA="ALPHA",e.BETA="BETA",e.GAMMA="GAMMA",e.PROD="PROD",e.DEV="DEV",e.INT_TEST="INT_TEST"}(d||(d={}));var g={"aws-cn":{ALPHA:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token",BETA:"https://beta.d2c.marketing.aws.a2z.org.cn/vs/token",GAMMA:"https://gamma.d2c.marketing.aws.a2z.org.cn/vs/token",PROD:"https://d2c.amazonaws.cn/vs/token",DEV:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token",INT_TEST:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token"},aws:{ALPHA:"https://vs-alpha.aws.amazon.com/token",BETA:"https://vs-beta.aws.amazon.com/token",GAMMA:"https://vs-gamma.aws.amazon.com/token",PROD:"https://vs.aws.amazon.com/token",DEV:"https://vs-alpha.aws.amazon.com/token",INT_TEST:"https://vs-beta.aws.amazon.com/token"}},y=["timeout"];function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeout:2e3},n=t.timeout,o=l(t,y);return Promise.race([fetch(e,o),new Promise((function(t,o){setTimeout((function(){var t=new Error("Request for ".concat(e," timed out after ").concat(n," milliseconds."));return t.name="TimeoutError",o(t)}),n)}))])}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.domain||window.location.hostname,n=e.env||d.DEV;return null!=t&&t.endsWith(".cn")?g["aws-cn"][n]:g.aws[n]}var w=["aws.amazon.com","awsevents.com","amplify.aws","amazonaws.cn","amazoncloud.cn","awsevents.cn","webchat-aws.clink.cn"],k="awsd2c-token-c",C="It does not seem your site has onboarded to Shortbread. Onboarding to Shortbread is required for using Visitor ID Service.",A=function(){function e(){a(this,e),u(this,"cookieValue",void 0),u(this,"payload",void 0),u(this,"tokenExpiry",void 0),u(this,"vid",void 0),this.cookieValue=m(k)||"",this.payload=this.getPayload(),this.vid=this.payload.vid||"",this.tokenExpiry=this.payload.exp||0}return c(e,[{key:"getValue",value:function(){return this.cookieValue}},{key:"getPayload",value:function(){return this.cookieValue?function(e){if(e.split(".").length<3)return{};var t=e.split(".")[1];try{return JSON.parse(atob(t))}catch(e){return{}}}(this.cookieValue):{}}},{key:"hasValidValue",value:function(){return this.vid.length>0&&!function(e){if(!e)return!0;var t=1e3*e;if(Date.now()>=t)return!0;return!1}(this.tokenExpiry)}},{key:"set",value:function(e,t){var n={domain:t||T(window.location.hostname),expires:31536e3};m(k,e,n),this.cookieValue=m(k)||"",this.payload=this.getPayload(),this.vid=this.payload.vid||this.vid,this.tokenExpiry=this.payload.exp||this.tokenExpiry}}]),e}();function T(e){var t=e.replace(/(^\w+:|^)\/\//,"").split(/[/?#]/)[0],n=w.filter((function(e){return t===e||new RegExp("(\\.?\\W|^)\\b".concat(e,"\\b$"),"gi").test(t)}));return n.length>0?n[0]:t}window.AWSMA=window.AWSMA||{};var E,O=[],P=[];AWSMA.visitorIdReady=function(e){E&&E.hasValidValue()?e(E.getPayload().vid||""):O.push(e)},AWSMA.tokenReady=function(e){E&&E.hasValidValue()&&E.getValue()?e(E.getValue()||""):P.push(e)};var S=function(){function e(t){if(a(this,e),u(this,"vidCookie",void 0),u(this,"visitorId",void 0),u(this,"visitorToken",void 0),u(this,"options",void 0),null===m("awsccc"))throw console.error(C),new Error(C);if(this.options=t,this.vidCookie=new A,E=this.vidCookie,this.visitorId="",this.visitorToken={},!t.cookieAllowed)return this.invokeVisitorIdReady(),void this.invokeTokenReady();this.setVisitorId()}return c(e,[{key:"getVisitorId",value:function(e){var t=this;this.getVisitorToken({domain:e.domain,onError:e.onError,onSuccess:function(n){n.vid&&"function"==typeof e.onSuccess&&(e.onSuccess(n.vid),t.invokeVisitorIdReady())}})}},{key:"getVisitorToken",value:function(e){var t=this;this.vidCookie.getValue()&&this.hasValidVisitorId()?"function"==typeof e.onSuccess&&e.onSuccess(this.visitorToken):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.api||b(e),n={};return e.mid&&(n.mid=e.mid),e.aid&&(n.aid=e.aid),e.token&&(n.token=e.token),v(t,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include",timeout:3e3}).then((function(e){var t=e;if(!t.ok){var n=new Error("VisitorID service responses with the error status.");throw n.name=t.status.toString(),n}return e.json()})).then((function(e){return e}))}({mid:e.mid,aid:e.aid,token:this.vidCookie.getValue(),env:this.options.env,domain:e.domain}).then((function(n){n.token&&(t.vidCookie.set(n.token,e.domain),t.setVisitorId(),t.invokeVisitorIdReady(),t.invokeTokenReady()),"function"==typeof e.onSuccess&&e.onSuccess(t.visitorToken)})).catch((function(n){t.invokeVisitorIdReady(),t.invokeTokenReady(),"function"==typeof e.onError&&e.onError(n)}))}},{key:"setVisitorId",value:function(){var e=this.vidCookie.getPayload();this.visitorToken=e||{},this.visitorId=e.vid||""}},{key:"hasValidVisitorId",value:function(){return this.vidCookie.hasValidValue()}},{key:"getExistingVisitorId",value:function(){return this.visitorId}},{key:"getExistingVisitorToken",value:function(){return this.visitorToken}},{key:"getExistingToken",value:function(){return this.vidCookie.getValue()}},{key:"invokeVisitorIdReady",value:function(){for(;O.length>0;){var e=O.shift();"function"==typeof e&&e(this.visitorId)}}},{key:"invokeTokenReady",value:function(){for(;P.length>0;){var e=P.shift();"function"==typeof e&&e(this.vidCookie.getValue())}}}]),e}();const V={[d.DEV]:"https://aws-mktg-csds-alpha.integ.amazon.com",[d.ALPHA]:"https://aws-mktg-csds-alpha.integ.amazon.com",[d.BETA]:"https://aws-marketing.integ.amazon.com",[d.GAMMA]:"https://aws-marketing-gamma.amazon.com",[d.PROD]:"https://aws.amazon.com",[d.INT_TEST]:"https://aws.amazon.com"};function I(){try{return window.AWSMA.ENV??d.PROD}catch{return d.PROD}}function _(e){L()&&console.error(e)}function D(e){L()&&console.log(e)}const L=function(){return d.DEV===I()};class R{static setConsentChangeHandler(e){R.cookieReader=i.exports.AWSCShortbreadCookieReader({onConsentChanged:t=>{D(`Cookie consent changed to ${JSON.stringify(t)}`),e(t)}})}static hasConsent(e){const t=Array.isArray(e)?e:[e],n=R.cookieReader.getConsentCookie()||r;return t.every((e=>n[o[e].cat]))}}t(R,"cookieReader",void 0);var U="https://json-schema.org/draft/2020-12/schema",j="https://d2c.aws.amazon.com/schemas/1.0.0/common-data",N="object",M={accountId:{type:"string"},browserColorDepth:{type:"number"},browserCookies:{description:"First party cookies",type:"object",properties:{awsTargetVisitorId:{description:"AWS Target Visitor Id Cookie",type:"string"},mrktoTrk:{description:"Marketo TRK cookie",type:"string"}}},browserViewPortHeight:{type:"number"},browserViewPortWidth:{type:"number"},cookieConsent:{type:"object",properties:{e:{type:"boolean"},p:{type:"boolean"},f:{type:"boolean"},a:{type:"boolean"}}},d2cVisitorToken:{type:"string"},initialScrolledHeight:{type:"number"},pageLocale:{type:"string"},pageName:{type:"string"},pageTitle:{type:"string"},pageType:{type:"string"},pageURL:{type:"string"},regStatus:{oneOf:[{type:"string",enum:["pre-register","registering","registered"]},{type:"null"}]},visitorId:{type:"string"}},x={$schema:U,$id:j,type:N,additionalProperties:false,properties:M},G=Object.freeze({__proto__:null,$schema:U,$id:j,type:N,additionalProperties:false,properties:M,default:x});const H=Object.prototype.hasOwnProperty,W=z,B={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://d2c.aws.amazon.com/schemas/1.0.0/common-data",type:"object",additionalProperties:!1,properties:{accountId:{type:"string"},browserColorDepth:{type:"number"},browserCookies:{description:"First party cookies",type:"object",properties:{awsTargetVisitorId:{description:"AWS Target Visitor Id Cookie",type:"string"},mrktoTrk:{description:"Marketo TRK cookie",type:"string"}}},browserViewPortHeight:{type:"number"},browserViewPortWidth:{type:"number"},cookieConsent:{type:"object",properties:{e:{type:"boolean"},p:{type:"boolean"},f:{type:"boolean"},a:{type:"boolean"}}},d2cVisitorToken:{type:"string"},initialScrolledHeight:{type:"number"},pageLocale:{type:"string"},pageName:{type:"string"},pageTitle:{type:"string"},pageType:{type:"string"},pageURL:{type:"string"},regStatus:{oneOf:[{type:"string",enum:["pre-register","registering","registered"]},{type:"null"}]},visitorId:{type:"string"}}};function z(e,{instancePath:t="",parentData:n,parentDataProperty:o,rootData:r=e,dynamicAnchors:i={}}={}){let a=null,s=0;const c=z.evaluated;if(c.dynamicProps&&(c.props=void 0),c.dynamicItems&&(c.items=void 0),0===s){if(!e||"object"!=typeof e||Array.isArray(e))return z.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const n=s;for(const n in e)if(!H.call(B.properties,n))return z.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(n===s){if(void 0!==e.accountId){const n=s;if("string"!=typeof e.accountId)return z.errors=[{instancePath:t+"/accountId",schemaPath:"#/properties/accountId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=n===s}else u=!0;if(u){if(void 0!==e.browserColorDepth){let n=e.browserColorDepth;const o=s;if("number"!=typeof n||!isFinite(n))return z.errors=[{instancePath:t+"/browserColorDepth",schemaPath:"#/properties/browserColorDepth/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;u=o===s}else u=!0;if(u){if(void 0!==e.browserCookies){let n=e.browserCookies;const o=s;if(s===o){if(!n||"object"!=typeof n||Array.isArray(n))return z.errors=[{instancePath:t+"/browserCookies",schemaPath:"#/properties/browserCookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0!==n.awsTargetVisitorId){const e=s;if("string"!=typeof n.awsTargetVisitorId)return z.errors=[{instancePath:t+"/browserCookies/awsTargetVisitorId",schemaPath:"#/properties/browserCookies/properties/awsTargetVisitorId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=e===s}else l=!0;if(l)if(void 0!==n.mrktoTrk){const e=s;if("string"!=typeof n.mrktoTrk)return z.errors=[{instancePath:t+"/browserCookies/mrktoTrk",schemaPath:"#/properties/browserCookies/properties/mrktoTrk/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=e===s}else l=!0}u=o===s}else u=!0;if(u){if(void 0!==e.browserViewPortHeight){let n=e.browserViewPortHeight;const o=s;if("number"!=typeof n||!isFinite(n))return z.errors=[{instancePath:t+"/browserViewPortHeight",schemaPath:"#/properties/browserViewPortHeight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;u=o===s}else u=!0;if(u){if(void 0!==e.browserViewPortWidth){let n=e.browserViewPortWidth;const o=s;if("number"!=typeof n||!isFinite(n))return z.errors=[{instancePath:t+"/browserViewPortWidth",schemaPath:"#/properties/browserViewPortWidth/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;u=o===s}else u=!0;if(u){if(void 0!==e.cookieConsent){let n=e.cookieConsent;const o=s;if(s===o){if(!n||"object"!=typeof n||Array.isArray(n))return z.errors=[{instancePath:t+"/cookieConsent",schemaPath:"#/properties/cookieConsent/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0!==n.e){const e=s;if("boolean"!=typeof n.e)return z.errors=[{instancePath:t+"/cookieConsent/e",schemaPath:"#/properties/cookieConsent/properties/e/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var d=e===s}else d=!0;if(d){if(void 0!==n.p){const e=s;if("boolean"!=typeof n.p)return z.errors=[{instancePath:t+"/cookieConsent/p",schemaPath:"#/properties/cookieConsent/properties/p/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;d=e===s}else d=!0;if(d){if(void 0!==n.f){const e=s;if("boolean"!=typeof n.f)return z.errors=[{instancePath:t+"/cookieConsent/f",schemaPath:"#/properties/cookieConsent/properties/f/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;d=e===s}else d=!0;if(d)if(void 0!==n.a){const e=s;if("boolean"!=typeof n.a)return z.errors=[{instancePath:t+"/cookieConsent/a",schemaPath:"#/properties/cookieConsent/properties/a/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;d=e===s}else d=!0}}}u=o===s}else u=!0;if(u){if(void 0!==e.d2cVisitorToken){const n=s;if("string"!=typeof e.d2cVisitorToken)return z.errors=[{instancePath:t+"/d2cVisitorToken",schemaPath:"#/properties/d2cVisitorToken/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;u=n===s}else u=!0;if(u){if(void 0!==e.initialScrolledHeight){let n=e.initialScrolledHeight;const o=s;if("number"!=typeof n||!isFinite(n))return z.errors=[{instancePath:t+"/initialScrolledHeight",schemaPath:"#/properties/initialScrolledHeight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;u=o===s}else u=!0;if(u){if(void 0!==e.pageLocale){const n=s;if("string"!=typeof e.pageLocale)return z.errors=[{instancePath:t+"/pageLocale",schemaPath:"#/properties/pageLocale/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;u=n===s}else u=!0;if(u){if(void 0!==e.pageName){const n=s;if("string"!=typeof e.pageName)return z.errors=[{instancePath:t+"/pageName",schemaPath:"#/properties/pageName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;u=n===s}else u=!0;if(u){if(void 0!==e.pageTitle){const n=s;if("string"!=typeof e.pageTitle)return z.errors=[{instancePath:t+"/pageTitle",schemaPath:"#/properties/pageTitle/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;u=n===s}else u=!0;if(u){if(void 0!==e.pageType){const n=s;if("string"!=typeof e.pageType)return z.errors=[{instancePath:t+"/pageType",schemaPath:"#/properties/pageType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;u=n===s}else u=!0;if(u){if(void 0!==e.pageURL){const n=s;if("string"!=typeof e.pageURL)return z.errors=[{instancePath:t+"/pageURL",schemaPath:"#/properties/pageURL/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;u=n===s}else u=!0;if(u){if(void 0!==e.regStatus){let n=e.regStatus;const o=s,r=s;let i=!1,c=null;const l=s;if("string"!=typeof n){const e={instancePath:t+"/regStatus",schemaPath:"#/properties/regStatus/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===a?a=[e]:a.push(e),s++}if("pre-register"!==n&&"registering"!==n&&"registered"!==n){const e={instancePath:t+"/regStatus",schemaPath:"#/properties/regStatus/oneOf/0/enum",keyword:"enum",params:{allowedValues:B.properties.regStatus.oneOf[0].enum},message:"must be equal to one of the allowed values"};null===a?a=[e]:a.push(e),s++}(p=l===s)&&(i=!0,c=0);const d=s;if(null!==n){const e={instancePath:t+"/regStatus",schemaPath:"#/properties/regStatus/oneOf/1/type",keyword:"type",params:{type:"null"},message:"must be null"};null===a?a=[e]:a.push(e),s++}var p;if((p=d===s)&&i?(i=!1,c=[c,1]):p&&(i=!0,c=1),!i){const e={instancePath:t+"/regStatus",schemaPath:"#/properties/regStatus/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf"};return null===a?a=[e]:a.push(e),s++,z.errors=a,!1}s=r,null!==a&&(r?a.length=r:a=null);u=o===s}else u=!0;if(u)if(void 0!==e.visitorId){const n=s;if("string"!=typeof e.visitorId)return z.errors=[{instancePath:t+"/visitorId",schemaPath:"#/properties/visitorId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;u=n===s}else u=!0}}}}}}}}}}}}}}}}return z.errors=a,0===s}z.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var F=G;function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){throw t&&t.errors?new Error("".concat(t.errors[0].instancePath," - ").concat(t.errors[0].message)):new Error(e)}var X=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"init",value:function(t){e.initiated||(e.initiated=!0,e.data={events:[]},e.validateCommon=t&&t.validateCommon||null,e.validateEvent=t&&t.validateEvent||null,e.commonSchema=t&&t.commonSchema||null)}},{key:"updateCommon",value:function(t){!e.validateCommon||e.validateCommon(t)?e.data=Object.assign(e.data,t):J("Data error with common data",e.validateCommon)}},{key:"pushEvent",value:function(t){if(!e.validateEvent||e.validateEvent(t)){if(e.commonSchema&&e.commonSchema.properties){var n=function(e,t){var n={};return Object.keys(e).forEach((function(o){Object.keys(t).includes(o)&&(n[o]=e[o])})),n}(t,e.commonSchema.properties);Object.assign(e.data,n),Object.assign(t,this.getCommonData())}Array.prototype.push.apply(e.data.events,[t])}else J("Data error with event data",e.validateEvent)}},{key:"getCommonData",value:function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.data);return delete t.events,t}},{key:"getData",value:function(){return e.data}}],(n=null)&&K(t.prototype,n),o&&K(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();q(X,"commonSchema",void 0),q(X,"validateEvent",void 0),q(X,"validateCommon",void 0),q(X,"data",void 0),q(X,"initiated",void 0),X.init({validateCommon:W,validateEvent:()=>!0,commonSchema:F});const Q=e=>{try{X.updateCommon(Z(e))}catch(e){console.error(e)}},Y=e=>{try{X.pushEvent(Z(e))}catch(e){console.error(e)}};function Z(e){const t=n.get().sanitizeData;return"function"==typeof t&&(e=t(e)),e}window.AWSMA.updateCommonData=e=>{Q(e)},window.AWSMA.pushEventData=e=>{Y(e)};class ee{constructor(){t(this,"baseUrl",void 0),t(this,"defaultTimeoutMillis",void 0),this.baseUrl=function(){const e=I();return V[e]}(),this.defaultTimeoutMillis=6e3}post(e,t){return fetch(`${this.baseUrl}${e}`,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},...t})}async sendBatch(e,t,n,o){const r=new AbortController,i=setTimeout((()=>{r.abort()}),o||this.defaultTimeoutMillis),a=JSON.stringify(t.batch);D(`Batch POST request body: ${a}`);try{const s=await this.post(e,{...t,body:a,signal:r.signal});return te(s)&&n>0&&navigator.onLine&&!t.keepalive?this.sendBatch(e,t,n-1,o):s}catch(o){if(o instanceof Error&&"AbortError"===o.name&&n>0)return _(o),this.sendBatch(e,t,n-1);_(o)}finally{clearTimeout(i)}}}const te=function(e){return e&&!e.ok&&e.status>=500};let ne;const oe=new Uint8Array(16);function re(){if(!ne&&(ne="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ne))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ne(oe)}var ie=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const ae=[];for(let e=0;e<256;++e)ae.push((e+256).toString(16).slice(1));function se(e,t=0){return(ae[e[t+0]]+ae[e[t+1]]+ae[e[t+2]]+ae[e[t+3]]+"-"+ae[e[t+4]]+ae[e[t+5]]+"-"+ae[e[t+6]]+ae[e[t+7]]+"-"+ae[e[t+8]]+ae[e[t+9]]+"-"+ae[e[t+10]]+ae[e[t+11]]+ae[e[t+12]]+ae[e[t+13]]+ae[e[t+14]]+ae[e[t+15]]).toLowerCase()}function ce(e){if(!function(e){return"string"==typeof e&&ie.test(e)}(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}function ue(e,t,n){function o(e,o,r,i){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof o&&(o=ce(o)),16!==(null===(a=o)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(o),s.set(e,o.length),s=n(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,r){i=i||0;for(let e=0;e<16;++e)r[i+e]=s[e];return r}return se(s)}try{o.name=e}catch(e){}return o.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",o}function le(e){return 14+(e+64>>>9<<4)+1}function de(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function pe(e,t,n,o,r,i){return de((a=de(de(t,e),de(o,i)))<<(s=r)|a>>>32-s,n);var a,s}function fe(e,t,n,o,r,i,a){return pe(t&n|~t&o,e,t,r,i,a)}function he(e,t,n,o,r,i,a){return pe(t&o|n&~o,e,t,r,i,a)}function me(e,t,n,o,r,i,a){return pe(t^n^o,e,t,r,i,a)}function ge(e,t,n,o,r,i,a){return pe(n^(t|~o),e,t,r,i,a)}ue("v3",48,(function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,o="0123456789abcdef";for(let r=0;r<n;r+=8){const n=e[r>>5]>>>r%32&255,i=parseInt(o.charAt(n>>>4&15)+o.charAt(15&n),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[le(t)-1]=t;let n=1732584193,o=-271733879,r=-1732584194,i=271733878;for(let t=0;t<e.length;t+=16){const a=n,s=o,c=r,u=i;n=fe(n,o,r,i,e[t],7,-680876936),i=fe(i,n,o,r,e[t+1],12,-389564586),r=fe(r,i,n,o,e[t+2],17,606105819),o=fe(o,r,i,n,e[t+3],22,-1044525330),n=fe(n,o,r,i,e[t+4],7,-176418897),i=fe(i,n,o,r,e[t+5],12,1200080426),r=fe(r,i,n,o,e[t+6],17,-1473231341),o=fe(o,r,i,n,e[t+7],22,-45705983),n=fe(n,o,r,i,e[t+8],7,1770035416),i=fe(i,n,o,r,e[t+9],12,-1958414417),r=fe(r,i,n,o,e[t+10],17,-42063),o=fe(o,r,i,n,e[t+11],22,-1990404162),n=fe(n,o,r,i,e[t+12],7,1804603682),i=fe(i,n,o,r,e[t+13],12,-40341101),r=fe(r,i,n,o,e[t+14],17,-1502002290),o=fe(o,r,i,n,e[t+15],22,1236535329),n=he(n,o,r,i,e[t+1],5,-165796510),i=he(i,n,o,r,e[t+6],9,-1069501632),r=he(r,i,n,o,e[t+11],14,643717713),o=he(o,r,i,n,e[t],20,-373897302),n=he(n,o,r,i,e[t+5],5,-701558691),i=he(i,n,o,r,e[t+10],9,38016083),r=he(r,i,n,o,e[t+15],14,-660478335),o=he(o,r,i,n,e[t+4],20,-405537848),n=he(n,o,r,i,e[t+9],5,568446438),i=he(i,n,o,r,e[t+14],9,-1019803690),r=he(r,i,n,o,e[t+3],14,-187363961),o=he(o,r,i,n,e[t+8],20,1163531501),n=he(n,o,r,i,e[t+13],5,-1444681467),i=he(i,n,o,r,e[t+2],9,-51403784),r=he(r,i,n,o,e[t+7],14,1735328473),o=he(o,r,i,n,e[t+12],20,-1926607734),n=me(n,o,r,i,e[t+5],4,-378558),i=me(i,n,o,r,e[t+8],11,-2022574463),r=me(r,i,n,o,e[t+11],16,1839030562),o=me(o,r,i,n,e[t+14],23,-35309556),n=me(n,o,r,i,e[t+1],4,-1530992060),i=me(i,n,o,r,e[t+4],11,1272893353),r=me(r,i,n,o,e[t+7],16,-155497632),o=me(o,r,i,n,e[t+10],23,-1094730640),n=me(n,o,r,i,e[t+13],4,681279174),i=me(i,n,o,r,e[t],11,-358537222),r=me(r,i,n,o,e[t+3],16,-722521979),o=me(o,r,i,n,e[t+6],23,76029189),n=me(n,o,r,i,e[t+9],4,-640364487),i=me(i,n,o,r,e[t+12],11,-421815835),r=me(r,i,n,o,e[t+15],16,530742520),o=me(o,r,i,n,e[t+2],23,-995338651),n=ge(n,o,r,i,e[t],6,-198630844),i=ge(i,n,o,r,e[t+7],10,1126891415),r=ge(r,i,n,o,e[t+14],15,-1416354905),o=ge(o,r,i,n,e[t+5],21,-57434055),n=ge(n,o,r,i,e[t+12],6,1700485571),i=ge(i,n,o,r,e[t+3],10,-1894986606),r=ge(r,i,n,o,e[t+10],15,-1051523),o=ge(o,r,i,n,e[t+1],21,-2054922799),n=ge(n,o,r,i,e[t+8],6,1873313359),i=ge(i,n,o,r,e[t+15],10,-30611744),r=ge(r,i,n,o,e[t+6],15,-1560198380),o=ge(o,r,i,n,e[t+13],21,1309151649),n=ge(n,o,r,i,e[t+4],6,-145523070),i=ge(i,n,o,r,e[t+11],10,-1120210379),r=ge(r,i,n,o,e[t+2],15,718787259),o=ge(o,r,i,n,e[t+9],21,-343485551),n=de(n,a),o=de(o,s),r=de(r,c),i=de(i,u)}return[n,o,r,i]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(le(t));for(let o=0;o<t;o+=8)n[o>>5]|=(255&e[o/8])<<o%32;return n}(e),8*e.length))}));var ye={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function ve(e,t,n){if(ye.randomUUID&&!t&&!e)return ye.randomUUID();const o=(e=e||{}).random||(e.rng||re)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return se(o)}function be(e,t,n,o){switch(e){case 0:return t&n^~t&o;case 1:case 3:return t^n^o;case 2:return t&n^t&o^n&o}}function we(e,t){return e<<t|e>>>32-t}ue("v5",80,(function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const o=e.length/4+2,r=Math.ceil(o/16),i=new Array(r);for(let t=0;t<r;++t){const n=new Uint32Array(16);for(let o=0;o<16;++o)n[o]=e[64*t+4*o]<<24|e[64*t+4*o+1]<<16|e[64*t+4*o+2]<<8|e[64*t+4*o+3];i[t]=n}i[r-1][14]=8*(e.length-1)/Math.pow(2,32),i[r-1][14]=Math.floor(i[r-1][14]),i[r-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<r;++e){const o=new Uint32Array(80);for(let t=0;t<16;++t)o[t]=i[e][t];for(let e=16;e<80;++e)o[e]=we(o[e-3]^o[e-8]^o[e-14]^o[e-16],1);let r=n[0],a=n[1],s=n[2],c=n[3],u=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),i=we(r,5)+be(n,a,s,c)+u+t[n]+o[e]>>>0;u=c,c=s,s=we(a,30)>>>0,a=r,r=i}n[0]=n[0]+r>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+s>>>0,n[3]=n[3]+c>>>0,n[4]=n[4]+u>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));class ke{constructor(e){t(this,"maxBatchSize",void 0),t(this,"batchingTimeMillis",void 0),t(this,"maxRetries",void 0),t(this,"failedBatchQueue",void 0),t(this,"timer",void 0),t(this,"D2CClientRequestHandler",void 0),this.maxBatchSize=e.maxBatchSize||10,this.batchingTimeMillis=e.batchingTimeMillis||2e3,this.maxRetries=e.maxRetries||1,this.failedBatchQueue=[];const n=X.getData().d2cVisitorToken?0:this.batchingTimeMillis;this.timer=this.getAddToBatchTimer(n),this.D2CClientRequestHandler=new ee}getAddToBatchTimer(e){if(e>=0)return setTimeout(function(){this.addToBatch(!1)}.bind(this),e)}addToBatch(e){this.timer&&clearTimeout(this.timer);const t=X.getData().events;if(0===t.length)return void(this.timer=this.getAddToBatchTimer(this.batchingTimeMillis));const n=[this.createBatch()];let o=0,r=0;for(;t.length>0;){const e=t.shift();e&&(o>=n.length&&n.push(this.createBatch()),n[o].d2cVisitorToken=X.getData().d2cVisitorToken,n[o].batchEvents.push(e),r++,r>=this.maxBatchSize&&(o++,r=0))}for(let t=0;t<n.length;t++){const o={batch:n[t],retries:0};this.sendBatch(o,e)}e||(this.timer=this.getAddToBatchTimer(this.batchingTimeMillis))}createBatch(){return{batchId:ve(),schemaVersion:"1.0.0",batchEvents:[],d2cVisitorToken:X.getCommonData().d2cVisitorToken||""}}async sendBatch(e,t){const n={batch:e.batch,keepalive:t};try{const o=await this.D2CClientRequestHandler.sendBatch("/csds/collector/v1/events/batch",n,this.maxRetries);o&&!o.ok&&this.failedBatchQueue.push(e.batch),D(`Sending batch: ${e.batch}, and ${t?"":"no "}keepalive flag.`)}catch(t){this.failedBatchQueue.push(e.batch),_(t)}}flushBatchQueue(){this.timer&&clearTimeout(this.timer),this.addToBatch(!0)}}const Ce=n.get(),Ae=function(e,t){try{const n=new URL(e);if(!n.search)return e;const o=Te(t||Ce),r=Ee(n,o);return n.search=r.toString(),n.toString()}catch(t){return e}},Te=function(e){const t=e.allowedURLParams,n=e.ignoredURLParams;return t&&t.length?e=>t.includes(e):n&&n.length?e=>!n.includes(e):()=>!0},Ee=function(e,t){const n=new URLSearchParams(e.search);return n.forEach((function(e,o){t(o)||n.delete(o)})),n},Oe=()=>Ae(location.href),Pe=e=>{if(!e)return window.scrollY;const t=document.querySelector(e);return t?t.scrollTop:void 0},Se={"aws-target-visitor-id":"awsTargetVisitorId",_mkto_trk:"mrktoTrk"},Ve=()=>{const e={};if(!document||!document.cookie)return e;const t=document.cookie.trim().split(";");for(let n=0;n<t.length;n++){const o=t[n].trim().split("="),r=o[0].trim();if(r&&Se[r]){if(R.hasConsent(r)){const t=Se[r],n=decodeURI(o[1].trim());e[t]=n}}}return e},Ie=(e=r)=>({e:e.essential,f:e.functional,p:e.performance,a:e.advertising});let _e;function De(){Y({eventType:_e.PAGE_VIEW,pageURL:Oe(),eventTimestamp:Date.now(),pageReferer:Ae(document.referrer)})}function Le(e){try{const t=new URL(e);return t.hash.includes("#/")?t.origin+t.pathname+t.hash:t.origin+t.pathname}catch(e){return _(e),""}}function Re(){let e=Le(Oe());const t=t=>{e=t},n=new MutationObserver((function(){!function(e,t,n){const o=Le(t);o!==e&&(De(),D(`URL changed to ${location.href}`),n(o))}(e,Oe(),t)}));return n.observe(document,{subtree:!0,childList:!0}),t}!function(e){e.PAGE_VIEW="pageView"}(_e||(_e={}));class Ue{constructor(e){t(this,"vidClient",void 0),t(this,"currentVal",void 0),t(this,"getVisitorTokenAndHandleCallback",void 0),this.currentVal="",this.getVisitorTokenAndHandleCallback=e.getVisitorTokenAndHandleCallback,this.vidClient=new S({cookieAllowed:e.cookieAllowed,env:I()}),D("Visitor ID has been initialized, requesting visitor token"),this.getVisitorTokenAndHandle()}getVisitorTokenAndHandle(){this.vidClient.options.cookieAllowed&&(this.currentVal=this.vidClient.getExistingToken(),this.vidClient.getVisitorToken({onSuccess:()=>{this.updateTokenInDataLayer(this.vidClient.getExistingToken()),this.getVisitorTokenAndHandleCallback()},onError:e=>{this.updateTokenInDataLayer(this.currentVal),console.error(`Error when attempting to get visitor token: ${e}`),this.getVisitorTokenAndHandleCallback()}}))}setCookieAllowed(e){this.vidClient.options.cookieAllowed=e}updateTokenInDataLayer(e){Q({d2cVisitorToken:e||""})}}async function je(e,t,n,o){try{return D(`waitForUpdate called with condition AWSMA.instanceCreated = ${t}`),await function(e,t){return new Promise((n=>{if(t){const t=setTimeout((()=>{clearTimeout(t),n()}),e)}else n()}))}(e,!t),n.call(null,o)}catch(e){_(e)}}function Ne(e){if(e){const t=R.cookieReader.getConsentCookie();let n=e;t&&!t.functional&&(n="",D("token is not updated due to functional cookies preferences being disabled")),D(`tokenCallback is executed to update data layer with d2cVisitorToken with value: ${n}`),window.AWSMA.instanceCreated=!0,Q({d2cVisitorToken:n})}}function Me({getVisitorTokenAndHandleCallback:e}){if(!window.AWSMA.instanceCreated)return new Ue({cookieAllowed:xe(),getVisitorTokenAndHandleCallback:e})}function xe(){return R.cookieReader.getConsentCookie()?.functional??!1}const Ge=n.get();let He,We;function Be(){R.setConsentChangeHandler((e=>{D(`Consent changed handler executed with consent: ${JSON.stringify(e)}`),Q({cookieConsent:Ie(e)}),AWSMA.tokenReady(Ne)}));const e=R.cookieReader.getConsentCookie()||r;return D(`Cookie consent settings at page load: ${JSON.stringify(e)}`),Q({cookieConsent:Ie(e),d2cVisitorToken:""}),e}function ze(){var e;Q({pageURL:Oe(),pageTitle:document.title,pageLocale:document.documentElement.lang,browserViewPortHeight:window.innerHeight,browserViewPortWidth:window.innerWidth,browserColorDepth:window.screen.colorDepth,browserCookies:Ve(),initialScrolledHeight:Pe(e)||0}),De()}return(async()=>{const e=Be();AWSMA.tokenReady(Ne),await async function(e){return He||(D("Attempting to request visitor ID via D2C Client"),He=await je(2e3,window.AWSMA.instanceCreated,Me,{cookieAllowed:e.functional,getVisitorTokenAndHandleCallback:()=>{D("vid created")}})),He}(e);!function(e,t,n){We||(We=new ke({maxBatchSize:e,batchingTimeMillis:t,maxRetries:n}))}(10,3500,1),function(e,t){document.addEventListener("visibilitychange",(t=>{"hidden"===document.visibilityState&&e.flushBatchQueue()}))}(We,Ge.scrollElement),ze(),Re()})(),e.setupCookieConfig=Be,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
